# å¿«é€Ÿå¼€å§‹æŒ‡å—

## é¡¹ç›®å·²ç¼–è¯‘å®Œæˆï¼

### ğŸ‰ é¡¹ç›®ç»“æ„

```
chatroom/
â”œâ”€â”€ CMakeLists.txt          # CMakeé…ç½®
â”œâ”€â”€ README.md              # å®Œæ•´æ–‡æ¡£
â”œâ”€â”€ .gitignore             # Gitå¿½ç•¥é…ç½®
â”œâ”€â”€ start_server.sh        # æœåŠ¡å™¨å¯åŠ¨è„šæœ¬ â­
â”œâ”€â”€ stop_server.sh         # æœåŠ¡å™¨åœæ­¢è„šæœ¬
â”œâ”€â”€ start_client.sh        # å®¢æˆ·ç«¯å¯åŠ¨è„šæœ¬ â­
â”œâ”€â”€ stop_client.sh         # å®¢æˆ·ç«¯åœæ­¢è„šæœ¬
â”œâ”€â”€ deploy_client.sh       # å®¢æˆ·ç«¯éƒ¨ç½²è„šæœ¬ â­
â”‚
â”œâ”€â”€ server/                # æœåŠ¡å™¨ä»£ç ç›®å½•
â”‚   â”œâ”€â”€ CMakeLists.txt
â”‚   â”œâ”€â”€ include/           # å¤´æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ http_server.h
â”‚   â”‚   â”œâ”€â”€ chatroom_server.h
â”‚   â”‚   â””â”€â”€ json_utils.h
â”‚   â”œâ”€â”€ src/               # æºç 
â”‚   â”‚   â”œâ”€â”€ http_server.cpp
â”‚   â”‚   â”œâ”€â”€ chatroom_server.cpp
â”‚   â”‚   â””â”€â”€ server_main.cpp
â”‚   â””â”€â”€ tests/             # æµ‹è¯•ä»£ç 
â”‚       â””â”€â”€ chatroom_test.cpp
â”‚
â”œâ”€â”€ client/                # å®¢æˆ·ç«¯ä»£ç ç›®å½•
â”‚   â”œâ”€â”€ CMakeLists.txt
â”‚   â”œâ”€â”€ include/           # å¤´æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ chatroom_client.h
â”‚   â””â”€â”€ src/               # æºç 
â”‚       â”œâ”€â”€ chatroom_client.cpp
â”‚       â””â”€â”€ client_main.cpp
â”‚
â””â”€â”€ build/                 # ç¼–è¯‘è¾“å‡ºç›®å½•
    â”œâ”€â”€ server/
    â”‚   â”œâ”€â”€ chatroom_server  # æœåŠ¡å™¨ç¨‹åº âœ“
    â”‚   â””â”€â”€ chatroom_test    # æµ‹è¯•ç¨‹åº âœ“
    â””â”€â”€ client/
        â””â”€â”€ chatroom_client  # å®¢æˆ·ç«¯ç¨‹åº âœ“
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

#### 1. å¯åŠ¨æœåŠ¡å™¨ï¼ˆç»ˆç«¯1ï¼‰
```bash
./start_server.sh        # é»˜è®¤ç«¯å£8080
# æˆ–æŒ‡å®šç«¯å£
./start_server.sh 9000
```

#### 2. å¯åŠ¨å®¢æˆ·ç«¯ï¼ˆç»ˆç«¯2ã€3ã€4...å¤šä¸ªå®¢æˆ·ç«¯ï¼‰
```bash
./start_client.sh                    # è¿æ¥æœ¬åœ°8080ç«¯å£
# æˆ–æŒ‡å®šæœåŠ¡å™¨
./start_client.sh 127.0.0.1 9000
```

#### 3. åœæ­¢æœåŠ¡
```bash
./stop_server.sh         # åœæ­¢æœåŠ¡å™¨
./stop_client.sh         # åœæ­¢æ‰€æœ‰å®¢æˆ·ç«¯
```

### æ–¹å¼äºŒï¼šç›´æ¥è¿è¡Œç¨‹åº

#### 1. å¯åŠ¨æœåŠ¡å™¨
```bash
cd build
./chatroom_server 8080
```

#### 2. å¯åŠ¨å®¢æˆ·ç«¯
```bash
cd build
./chatroom_client 127.0.0.1 8080
```

## ğŸ’¬ ä½¿ç”¨ç¤ºä¾‹

### æœåŠ¡å™¨è¾“å‡ºç¤ºä¾‹ï¼š
```
===== èŠå¤©å®¤æœåŠ¡å™¨ =====
ç«¯å£: 8080
[2026-01-14 15:30:00] [info] æ³¨å†Œè·¯ç”±: /login
[2026-01-14 15:30:00] [info] æ³¨å†Œè·¯ç”±: /send
[2026-01-14 15:30:00] [info] æ³¨å†Œè·¯ç”±: /messages
[2026-01-14 15:30:00] [info] æ³¨å†Œè·¯ç”±: /users
[2026-01-14 15:30:00] [info] HTTPæœåŠ¡å™¨å¯åŠ¨ï¼Œç›‘å¬ç«¯å£: 8080
[2026-01-14 15:30:05] [info] ç”¨æˆ·ç™»å½•: å¼ ä¸‰
[2026-01-14 15:30:10] [info] æ”¶åˆ°æ¶ˆæ¯ [å¼ ä¸‰]: å¤§å®¶å¥½ï¼
```

### å®¢æˆ·ç«¯ä½¿ç”¨æµç¨‹ï¼š
```
===== èŠå¤©å®¤å®¢æˆ·ç«¯ =====
æœåŠ¡å™¨: 127.0.0.1:8080

è¯·è¾“å…¥ç”¨æˆ·å: å¼ ä¸‰
ç™»å½•æˆåŠŸï¼æ¬¢è¿ å¼ ä¸‰
è¾“å…¥æ¶ˆæ¯å¹¶æŒ‰å›è½¦å‘é€ï¼Œè¾“å…¥ /quit é€€å‡º
========================

å¤§å®¶å¥½ï¼
[2026-01-14 15:30:15] æå››: ä½ å¥½ï¼Œå¼ ä¸‰ï¼
[2026-01-14 15:30:20] ç‹äº”: æ¬¢è¿ï¼
ä½ ä»¬å¥½ï¼
/quit
æ­£åœ¨é€€å‡º...
å·²é€€å‡ºèŠå¤©å®¤
```

## âœ… æµ‹è¯•

é¡¹ç›®å·²é€šè¿‡æ‰€æœ‰æµ‹è¯•ï¼š
- âœ“ æœåŠ¡å™¨åˆ›å»ºæµ‹è¯•
- âœ“ æ—¶é—´æˆ³æ ¼å¼æµ‹è¯•
- âœ“ åŸºæœ¬é›†æˆæµ‹è¯•

è¿è¡Œæµ‹è¯•ï¼š
```bash
cd build
./server/chatroom_test
```

## ğŸ”§ æŠ€æœ¯ç‰¹æ€§

- **C++æ ‡å‡†**: C++20
- **é€šä¿¡åè®®**: HTTP/1.1
- **æ•°æ®æ ¼å¼**: JSON
- **æ—¥å¿—åº“**: spdlog v1.12.0
- **JSONåº“**: nlohmann/json v3.11.3
- **æµ‹è¯•æ¡†æ¶**: googletest v1.14.0
- **æ„å»ºå·¥å…·**: CMake 3.20+
- **çº¿ç¨‹å®‰å…¨**: ä½¿ç”¨äº’æ–¥é”ä¿æŠ¤å…±äº«æ•°æ®

## ğŸ“¡ APIæ¥å£

### POST /login - ç™»å½•
```json
è¯·æ±‚: {"username": "å¼ ä¸‰"}
å“åº”: {"success": true, "message": "ç™»å½•æˆåŠŸ", "username": "å¼ ä¸‰"}
```

### POST /send - å‘é€æ¶ˆæ¯
```json
è¯·æ±‚: {"username": "å¼ ä¸‰", "content": "ä½ å¥½"}
å“åº”: {"success": true, "message": "æ¶ˆæ¯å‘é€æˆåŠŸ"}
```

### GET /messages - è·å–æ¶ˆæ¯
```json
å“åº”: {
  "success": true,
  "messages": [
    {"username": "å¼ ä¸‰", "content": "ä½ å¥½", "timestamp": "2026-01-14 15:30:00"}
  ]
}
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å¤šå®¢æˆ·ç«¯æµ‹è¯•**ï¼šå»ºè®®å¼€3-4ä¸ªç»ˆç«¯çª—å£ï¼Œå¯åŠ¨å¤šä¸ªå®¢æˆ·ç«¯æµ‹è¯•å¤šäººèŠå¤©
2. **æ¶ˆæ¯æŒä¹…åŒ–**ï¼šå½“å‰ç‰ˆæœ¬æ¶ˆæ¯å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ŒæœåŠ¡å™¨é‡å¯åä¼šä¸¢å¤±
3. **è½®è¯¢æœºåˆ¶**ï¼šå®¢æˆ·ç«¯æ¯ç§’è½®è¯¢ä¸€æ¬¡æ–°æ¶ˆæ¯
4. **é€€å‡ºå‘½ä»¤**ï¼šåœ¨å®¢æˆ·ç«¯è¾“å…¥ `/quit` å¯ä»¥é€€å‡ºèŠå¤©å®¤
5. **åœæ­¢æœåŠ¡å™¨**ï¼šæŒ‰ `Ctrl+C` åœæ­¢æœåŠ¡å™¨

## ğŸ¯ ä¸‹ä¸€æ­¥æ”¹è¿›å»ºè®®

- [ ] å®ç°WebSocketæ”¯æŒå®ç°çœŸæ­£çš„æ¨é€
- [ ] æ·»åŠ æ¶ˆæ¯æŒä¹…åŒ–ï¼ˆæ•°æ®åº“ï¼‰
- [ ] å®ç°ç”¨æˆ·è®¤è¯å’Œä¼šè¯ç®¡ç†
- [ ] æ·»åŠ ç§èŠåŠŸèƒ½
- [ ] æ”¯æŒè¡¨æƒ…å’Œæ–‡ä»¶ä¼ è¾“
- [ ] å®ç°æ¶ˆæ¯åŠ å¯†

## ğŸ› é—®é¢˜æ’æŸ¥

### ç«¯å£è¢«å ç”¨
å¦‚æœ8080ç«¯å£è¢«å ç”¨ï¼Œä½¿ç”¨å…¶ä»–ç«¯å£ï¼š
```bash
./start_server.sh 9000
./start_client.sh 127.0.0.1 9000
```

### æ— æ³•è¿æ¥æœåŠ¡å™¨
1. ç¡®ä¿æœåŠ¡å™¨å·²å¯åŠ¨
2. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
3. ç¡®è®¤IPå’Œç«¯å£æ­£ç¡®

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰
